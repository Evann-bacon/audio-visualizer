<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Wave</title>
<style>
body{
  margin:0;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
}

canvas{
  position:absolute;
}

#album{
  width:220px;
  height:220px;
  border-radius:50%;
  object-fit:cover;
  position:absolute;
  cursor:pointer;
  z-index:2;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>
<img id="album" src="car.png">
<audio id="audio" src="music.mp3"></audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const audio = document.getElementById("audio");
const album = document.getElementById("album");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const baseRadius = 130;
const lines = 180;

let time = 0;
let animationId = null;

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const cx = canvas.width/2;
  const cy = canvas.height/2;

  for(let i=0;i<lines;i++){
    const angle = (i/lines)*Math.PI*2;
    const wave = Math.sin(angle*6 + time);

    const inner = baseRadius + wave*4;
    const outer = baseRadius + 10 + wave*6;

    const x1 = cx + Math.cos(angle)*inner;
    const y1 = cy + Math.sin(angle)*inner;

    const x2 = cx + Math.cos(angle)*outer;
    const y2 = cy + Math.sin(angle)*outer;

    ctx.beginPath();
    ctx.moveTo(x1,y1);
    ctx.lineTo(x2,y2);
    ctx.strokeStyle="red";
    ctx.lineWidth=1.5;
    ctx.stroke();
  }

  time += 0.04;
  animationId = requestAnimationFrame(draw);
}

function stop(){
  cancelAnimationFrame(animationId);
  animationId=null;
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

album.addEventListener("click", ()=>{
  if(audio.paused){
    audio.play();
    if(!animationId) draw();
  }else{
    audio.pause();
  }
});

audio.addEventListener("pause", stop);
audio.addEventListener("ended", stop);

</script>
</body>
</html>
